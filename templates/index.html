<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFC Fight Predictor - ML Pipeline</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            font-size: 1rem;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .chart-container {
            margin: 30px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .predictions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .prediction-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .prediction-card:hover {
            transform: translateY(-5px);
        }

        .prediction-card.red {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .prediction-card.blue {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
        }

        .fighters {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .prediction {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .confidence {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .weight-class {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: inline-block;
            margin-top: 10px;
        }

        .model-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .model-info h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .model-info ul {
            list-style: none;
            padding: 0;
        }

        .model-info li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .model-info li:last-child {
            border-bottom: none;
        }

        .model-info i {
            margin-right: 10px;
            color: #ffd700;
        }

        .accuracy-badge {
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .predictions-grid {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading i {
            font-size: 2rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-fist-raised"></i> UFC Fight Predictor</h1>
            <p>Advanced Machine Learning Pipeline for UFC Fight Outcome Predictions</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-database"></i>
                <h3>6,528</h3>
                <p>Historical Fights Analyzed</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-brain"></i>
                <h3>84.6%</h3>
                <p>Prediction Accuracy</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <h3>1,000+</h3>
                <p>Unique Fighters</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-chart-line"></i>
                <h3>27</h3>
                <p>Features Engineered</p>
            </div>
        </div>

        <div class="model-info">
            <h3><i class="fas fa-cogs"></i> Model Architecture</h3>
            <ul>
                <li><i class="fas fa-layer-group"></i> Multi-Layer Perceptron (MLP) Neural Network</li>
                <li><i class="fas fa-network-wired"></i> Hidden Layer: 64 neurons with ReLU activation</li>
                <li><i class="fas fa-chart-bar"></i> Features: 27 engineered features including odds, stats, and physical attributes</li>
                <li><i class="fas fa-crosshairs"></i> Target: Binary classification (Red vs Blue corner winner)</li>
                <li><i class="fas fa-trophy"></i> Performance: 84.6% accuracy on recent predictions</li>
            </ul>
        </div>

        <div class="section">
            <h2><i class="fas fa-chart-pie"></i> Fight Statistics</h2>
            <div class="chart-container">
                <div id="winnerDistribution"></div>
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-weight"></i> Weight Class Distribution</h2>
            <div class="chart-container">
                <div id="weightClassChart"></div>
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-fist-raised"></i> Fight Finish Types</h2>
            <div class="chart-container">
                <div id="finishTypesChart"></div>
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-crystal-ball"></i> Upcoming Fight Predictions</h2>
            <div class="predictions-grid" id="predictionsGrid">
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Loading predictions...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load data from API
        async function loadData() {
            try {
                // Load statistics
                const statsResponse = await fetch('/api/stats');
                const statsData = await statsResponse.json();
                
                if (statsData.success) {
                    updateStats(statsData.stats);
                    renderCharts(statsData.stats);
                }
                
                // Load predictions
                const predictionsResponse = await fetch('/api/predictions');
                const predictionsData = await predictionsResponse.json();
                
                if (predictionsData.success) {
                    renderPredictions(predictionsData.predictions);
                }
                
            } catch (error) {
                console.error('Error loading data:', error);
                // Fallback to sample data
                renderSampleData();
            }
        }

        function updateStats(stats) {
            // Update stat cards with real data
            document.querySelector('.stat-card:nth-child(1) h3').textContent = stats.totalFights.toLocaleString();
            document.querySelector('.stat-card:nth-child(3) h3').textContent = stats.uniqueFighters.toLocaleString();
        }

        function renderCharts(stats) {
            // Winner distribution chart
            const winnerData = {
                x: ['Red Corner', 'Blue Corner'],
                y: [stats.redWins, stats.blueWins],
                type: 'bar',
                marker: {
                    color: ['#ff6b6b', '#4ecdc4'],
                    line: {color: 'rgba(0,0,0,0.1)', width: 0.5}
                }
            };

            const winnerLayout = {
                title: 'Winner Distribution: Red vs Blue Corner',
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                font: {family: 'Segoe UI', size: 14, color: '#333'},
                xaxis: {title: ''},
                yaxis: {title: 'Number of Wins', gridcolor: 'rgba(0,0,0,0.05)'},
                bargap: 0.4,
                showlegend: false
            };

            // Weight class chart
            const weightClassData = {
                x: stats.weightClasses.labels,
                y: stats.weightClasses.values,
                type: 'bar',
                marker: {
                    color: '#a0b3ff',
                    line: {color: 'rgba(0,0,0,0.15)', width: 1}
                }
            };

            const weightClassLayout = {
                title: 'Fights by Weight Class',
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                font: {family: 'Segoe UI', size: 14, color: '#333'},
                xaxis: {title: '', tickangle: -15},
                yaxis: {title: 'Number of Fights', gridcolor: 'rgba(0,0,0,0.05)'},
                bargap: 0,
                showlegend: false
            };

            // Finish types chart
            const finishData = {
                x: stats.finishTypes.values,
                y: stats.finishTypes.labels,
                type: 'bar',
                orientation: 'h',
                marker: {
                    color: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff', '#5f27cd'],
                    line: {color: 'rgba(0,0,0,0.1)', width: 0.5}
                }
            };

            const finishLayout = {
                title: 'Fight Finish Types',
                plot_bgcolor: 'white',
                paper_bgcolor: 'white',
                font: {family: 'Segoe UI', size: 14, color: '#333'},
                xaxis: {title: 'Count', gridcolor: 'rgba(0,0,0,0.05)'},
                yaxis: {title: ''},
                bargap: 0.3,
                showlegend: false
            };

            // Render charts
            Plotly.newPlot('winnerDistribution', [winnerData], winnerLayout);
            Plotly.newPlot('weightClassChart', [weightClassData], weightClassLayout);
            Plotly.newPlot('finishTypesChart', [finishData], finishLayout);
        }

        function renderPredictions(predictions) {
            const grid = document.getElementById('predictionsGrid');
            grid.innerHTML = '';

            predictions.forEach(fight => {
                const card = document.createElement('div');
                card.className = `prediction-card ${fight.prediction.toLowerCase()}`;
                
                const confidencePercent = Math.round(fight.confidence * 100);
                
                card.innerHTML = `
                    <div class="fighters">${fight.red} vs ${fight.blue}</div>
                    <div class="prediction">
                        <i class="fas fa-${fight.prediction === 'Red' ? 'fist-raised' : 'shield-alt'}"></i>
                        ${fight.prediction} Corner Wins
                    </div>
                    <div class="confidence">Confidence: ${confidencePercent}%</div>
                    <div class="weight-class">${fight.weightClass}</div>
                `;
                
                grid.appendChild(card);
            });
        }

        function renderSampleData() {
            // Fallback sample data if API fails
            const sampleStats = {
                redWins: 3200,
                blueWins: 3328,
                weightClasses: {
                    labels: ['Lightweight', 'Welterweight', 'Featherweight', 'Bantamweight', 'Middleweight', 'Light Heavyweight', 'Heavyweight', 'Flyweight'],
                    values: [850, 720, 680, 520, 480, 420, 380, 320]
                },
                finishTypes: {
                    labels: ['U-DEC', 'KO/TKO', 'S-DEC', 'SUB', 'M-DEC', 'DQ', 'NC', 'Overturned'],
                    values: [1200, 980, 850, 420, 380, 320, 280, 200]
                }
            };

            const samplePredictions = [
                {
                    red: 'Colby Covington',
                    blue: 'Joaquin Buckley',
                    prediction: 'Blue',
                    confidence: 0.67,
                    weightClass: 'Welterweight'
                },
                {
                    red: 'Cub Swanson',
                    blue: 'Billy Quarantillo',
                    prediction: 'Red',
                    confidence: 0.53,
                    weightClass: 'Featherweight'
                }
            ];

            renderCharts(sampleStats);
            renderPredictions(samplePredictions);
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html> 